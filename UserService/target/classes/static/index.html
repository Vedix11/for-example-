<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Music Library</title>
    <style>
        body { font-family: sans-serif; background-color: #f4f4f9; color: #333; }
        #container { max-width: 800px; margin: 40px auto; padding: 20px; background: white; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-radius: 8px; }
        h1 { color: #5a2a88; }
        #song-list { list-style: none; padding: 0; }
        .song-item { background: #eee; padding: 10px; margin-bottom: 5px; border-left: 5px solid #5a2a88; }
        .song-item strong { color: #3d1d5c; }
    </style>
</head>
<body>

<div id="container">
    <h1>Global Song Library</h1>
    <p>This list is fetched from the <strong>User Service</strong>, which in turn fetches it from the <strong>Admin Service</strong>!</p>
    <ul id="song-list">
        <li>Loading songs...</li>
    </ul>
</div>

<script>
    window.addEventListener('load', () => {
        // We call the UserService, which will then call the AdminService
        const apiUrl = '/api/users/songs';

        fetch(apiUrl)
            .then(response => response.json())
            .then(songs => {
                const songList = document.getElementById('song-list');
                songList.innerHTML = ''; // Clear loading message

                if (songs.length === 0) {
                    songList.innerHTML = '<li>No songs in library. Use Postman to add songs to the AdminService.</li>';
                    return;
                }

                songs.forEach(song => {
                    const listItem = document.createElement('li');
                    listItem.className = 'song-item';
                    listItem.innerHTML = `<strong>${song.songName}</strong> by ${song.artist}`;
                    songList.appendChild(listItem);
                });
            })
            .catch(error => {
                console.error('Error fetching songs:', error);
                document.getElementById('song-list').innerHTML = `<li>Error loading songs. Check console for details.</li>`;
            });
    });
</script>

</body>
</html>